import{b as U,c as G,f as J,k as K}from"./chunk-2NUQVPLQ.js";import{a as Z}from"./chunk-U6TJCA2D.js";import{a as X}from"./chunk-B2COKLLR.js";import{e as H}from"./chunk-MCPEIG4C.js";import{$ as C,$a as N,Bb as O,C as A,Ca as y,Cb as Q,Db as q,Gb as P,Ha as k,K as D,Na as l,Pa as s,Qa as a,Ra as g,Ua as I,Va as x,Wa as M,Za as L,_ as f,_a as Y,bb as c,cb as b,db as h,fb as R,g as S,gb as $,hb as W,ib as j,kb as u,ua as r,va as B,y as V}from"./chunk-G2I6LUOS.js";var ie=o=>["/stock",o],ee=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=y({type:o,selectors:[["app-stock-card"]],inputs:{stock:"stock"},decls:17,vars:14,consts:[[1,"stock-card","card",3,"routerLink"],[1,"stock-header"],[1,"stock-code"],[1,"badge",3,"ngClass"],[1,"stock-name"],[1,"stock-price"],[1,"current-price"],[1,"price-change",3,"ngClass"],[1,"stock-category"],[1,"stock-chart"],[1,"chart-line",3,"ngClass"]],template:function(n,e){n&1&&(s(0,"div",0)(1,"div",1)(2,"div",2),c(3),a(),s(4,"span",3),c(5),a()(),s(6,"div",4),c(7),a(),s(8,"div",5)(9,"span",6),c(10),a(),s(11,"span",7),c(12),a()(),s(13,"div",8),c(14),a(),s(15,"div",9),g(16,"div",10),a()()),n&2&&(l("routerLink",u(12,ie,e.stock.id)),r(3),b(e.stock.code),r(),l("ngClass",e.stock.shariaStatus==="Halal"?"badge-halal":"badge-haram"),r(),h(" ",e.stock.shariaStatus," "),r(2),b(e.stock.name),r(3),h("$",e.stock.price.toFixed(2),""),r(),l("ngClass",e.stock.change>=0?"positive":"negative"),r(),R(" ",e.stock.change>=0?"+":"","",e.stock.change.toFixed(2)," (",e.stock.changePercent.toFixed(2),"%) "),r(2),b(e.stock.category),r(2),l("ngClass",e.stock.change>=0?"positive-chart":"negative-chart"))},dependencies:[P,O,H],styles:['.stock-card[_ngcontent-%COMP%]{padding:16px;margin-bottom:16px;width:100%;transition:all .3s ease;border-left:4px solid transparent;will-change:transform,box-shadow}.stock-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 10px 20px #0000001a;border-left:4px solid var(--primary-color)}.stock-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.stock-code[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;position:relative;display:inline-block}.stock-code[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;width:0;height:2px;background-color:var(--primary-color);transition:width .3s ease}.stock-card[_ngcontent-%COMP%]:hover   .stock-code[_ngcontent-%COMP%]:after{width:100%}.stock-name[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-bottom:12px}.stock-price[_ngcontent-%COMP%]{margin-bottom:8px}.current-price[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;margin-right:8px}.price-change[_ngcontent-%COMP%]{font-size:.9rem;transition:all .3s ease}.stock-card[_ngcontent-%COMP%]:hover   .price-change.positive[_ngcontent-%COMP%]{color:var(--secondary-color);font-weight:700}.stock-card[_ngcontent-%COMP%]:hover   .price-change.negative[_ngcontent-%COMP%]{color:var(--danger-color);font-weight:700}.positive[_ngcontent-%COMP%]{color:var(--secondary-color)}.negative[_ngcontent-%COMP%]{color:var(--danger-color)}.stock-category[_ngcontent-%COMP%]{font-size:.8rem;color:#888;margin-bottom:10px}.stock-chart[_ngcontent-%COMP%]{height:30px;position:relative;overflow:hidden}.chart-line[_ngcontent-%COMP%]{position:absolute;top:50%;left:0;width:0;height:2px;transform:translateY(-50%);transition:width 1s ease}.stock-card[_ngcontent-%COMP%]:hover   .chart-line[_ngcontent-%COMP%]{width:100%}.positive-chart[_ngcontent-%COMP%]{background:linear-gradient(90deg,transparent,var(--secondary-color))}.negative-chart[_ngcontent-%COMP%]{background:linear-gradient(90deg,transparent,var(--danger-color))}'],changeDetection:0})}}return o})();var re=["backgroundAnimation"],te=o=>({active:o});function ae(o,p){if(o&1){let t=I();s(0,"div",12)(1,"button",13),x("click",function(){let e=f(t).$implicit,d=M();return C(d.filterByCategory(e))}),c(2),a()()}if(o&2){let t=p.$implicit,n=M();r(),l("ngClass",u(2,te,n.selectedCategory===t)),r(),h(" ",t," ")}}function se(o,p){o&1&&g(0,"app-loading-spinner",20)}function ce(o,p){o&1&&(s(0,"div",21)(1,"p"),c(2,"No stocks found matching your criteria."),a()())}function de(o,p){if(o&1&&g(0,"app-stock-card",24),o&2){let t=p.$implicit;l("stock",t)}}function le(o,p){if(o&1&&(s(0,"div",22),k(1,de,1,1,"app-stock-card",23),a()),o&2){let t=M();r(),l("ngForOf",t.stocks)("ngForTrackBy",t.trackByStockId)}}var xe=(()=>{class o{constructor(t){this.apiService=t,this.stocks=[],this.categories=[],this.searchTerm="",this.selectedCategory="",this.loading=!0,this.searchTerms=new S,this.destroy$=new S}ngOnInit(){this.loadCategories(),this.loadStocks(),this.searchTerms.pipe(D(this.destroy$),V(300),A()).subscribe(()=>{this.loadStocks()})}ngAfterViewInit(){this.initBackgroundAnimation()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.resizeObserver&&this.resizeObserver.disconnect()}searchTermChanged(){this.searchTerms.next(this.searchTerm)}initBackgroundAnimation(){setTimeout(()=>{let t=this.backgroundAnimation.nativeElement;if(!t)return;let n=document.createElement("canvas");t.appendChild(n),n.width=t.offsetWidth||300,n.height=t.offsetHeight||500;let e=n.getContext("2d");if(!e){console.warn("Canvas 2D context not supported");return}let d=[],_=30;for(let i=0;i<_;i++)d.push({x:Math.random()*n.width,y:Math.random()*n.height,radius:Math.random()*3+1,color:i%2===0?"#27ae60":"#2c3e50",speedX:Math.random()*.3-.15,speedY:Math.random()*.3-.15});let m=()=>{e&&(e.clearRect(0,0,n.width,n.height),d.forEach(i=>{e.beginPath(),e.arc(i.x,i.y,i.radius,0,Math.PI*2),e.fillStyle=i.color,e.fill(),i.x+=i.speedX,i.y+=i.speedY,(i.x<0||i.x>n.width)&&(i.speedX*=-1),(i.y<0||i.y>n.height)&&(i.speedY*=-1)}),d.forEach((i,T)=>{for(let w=T+1;w<Math.min(T+10,d.length);w++){let v=d[w],F=i.x-v.x,E=i.y-v.y,z=Math.sqrt(F*F+E*E);z<80&&(e.beginPath(),e.strokeStyle=`rgba(44, 62, 80, ${.15*(1-z/80)})`,e.lineWidth=1,e.moveTo(i.x,i.y),e.lineTo(v.x,v.y),e.stroke())}}),this.animationFrameId=requestAnimationFrame(m))};m(),this.resizeObserver=new ResizeObserver(()=>{t&&(n.width=t.offsetWidth||300,n.height=t.offsetHeight||500)}),this.resizeObserver.observe(t)},100)}loadCategories(){this.apiService.getCategories().subscribe(t=>{this.categories=t})}loadStocks(){this.loading=!0,this.apiService.getStocks(this.searchTerm,this.selectedCategory).subscribe(t=>{this.stocks=t,this.loading=!1})}filterByCategory(t){this.selectedCategory=t,this.loadStocks()}trackByStockId(t,n){return n.id}static{this.\u0275fac=function(n){return new(n||o)(B(Z))}}static{this.\u0275cmp=y({type:o,selectors:[["app-search"]],viewQuery:function(n,e){if(n&1&&L(re,5),n&2){let d;Y(d=N())&&(e.backgroundAnimation=d.first)}},decls:29,vars:9,consts:[["backgroundAnimation",""],[1,"search-page"],[1,"background-animation"],[1,"search-header"],[1,"search-container"],[1,"search-filters"],[1,"search-box"],["type","text","placeholder","Search by stock name or code",3,"ngModelChange","input","ngModel"],[1,"search-icon"],[1,"fas","fa-search"],[1,"category-filter"],[1,"category-list"],[1,"category-item"],[3,"click","ngClass"],["class","category-item",4,"ngFor","ngForOf"],[1,"search-results"],[1,"results-header"],["message","Loading stocks...",4,"ngIf"],["class","no-results",4,"ngIf"],["class","stocks-grid",4,"ngIf"],["message","Loading stocks..."],[1,"no-results"],[1,"stocks-grid"],[3,"stock",4,"ngFor","ngForOf","ngForTrackBy"],[3,"stock"]],template:function(n,e){if(n&1){let d=I();s(0,"div",1),g(1,"div",2,0),s(3,"div",3)(4,"h2"),c(5,"Search Stocks"),a(),s(6,"p"),c(7,"Find Sharia-compliant stocks for your investment portfolio"),a()(),s(8,"div",4)(9,"div",5)(10,"div",6)(11,"input",7),j("ngModelChange",function(m){return f(d),W(e.searchTerm,m)||(e.searchTerm=m),C(m)}),x("input",function(){return f(d),C(e.searchTermChanged())}),a(),s(12,"div",8),g(13,"i",9),a()(),s(14,"div",10)(15,"h3"),c(16,"Filter by Category"),a(),s(17,"div",11)(18,"div",12)(19,"button",13),x("click",function(){return f(d),C(e.filterByCategory(""))}),c(20," All Categories "),a()(),k(21,ae,3,4,"div",14),a()()(),s(22,"div",15)(23,"div",16)(24,"h3"),c(25),a()(),k(26,se,1,0,"app-loading-spinner",17)(27,ce,3,0,"div",18)(28,le,2,2,"div",19),a()()()}n&2&&(r(11),$("ngModel",e.searchTerm),r(8),l("ngClass",u(7,te,e.selectedCategory==="")),r(2),l("ngForOf",e.categories),r(4),h("Results (",e.stocks.length,")"),r(),l("ngIf",e.loading),r(),l("ngIf",!e.loading&&e.stocks.length===0),r(),l("ngIf",!e.loading&&e.stocks.length>0))},dependencies:[P,O,Q,q,K,U,G,J,ee,X],styles:['.search-page[_ngcontent-%COMP%]{padding:20px 0;position:relative;overflow:hidden}.background-animation[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1;opacity:.1}.search-header[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center;animation:_ngcontent-%COMP%_fadeInDown .8s ease}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.search-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:var(--primary-color);margin-bottom:8px}.search-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.search-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 1fr;gap:20px;animation:_ngcontent-%COMP%_fadeIn 1s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.search-filters[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:var(--shadow);padding:16px;animation:_ngcontent-%COMP%_slideInLeft .8s ease}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.search-box[_ngcontent-%COMP%]{margin-bottom:20px;position:relative}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:40px;transition:all .3s ease;border:1px solid #ddd}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 2px #2c3e5033}.search-icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#999;transition:color .3s ease}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .search-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.category-filter[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:10px}.category-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.category-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;text-align:left;background:none;color:#333;padding:8px;border-radius:4px;transition:all .3s ease;position:relative;overflow:hidden}.category-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}.category-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{left:100%}.category-item[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.search-results[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:var(--shadow);padding:16px;animation:_ngcontent-%COMP%_slideInRight .8s ease}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.results-header[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #eee}.no-results[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#666}.stocks-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}}return o})();export{xe as SearchComponent};

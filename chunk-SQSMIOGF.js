import{a as A}from"./chunk-UI47S4U4.js";import{a as $,b as L}from"./chunk-PNPO67QQ.js";import{b as T}from"./chunk-OKGSBTW6.js";import{Ca as w,Db as I,Eb as N,Fb as E,Ha as m,Ib as D,Na as r,Oa as v,Qa as a,Ra as i,Sa as g,Xa as f,cb as s,db as d,eb as h,gb as y,mb as S,ua as n,va as _}from"./chunk-CBZJCNC2.js";var j=(e,l)=>({compliant:e,"non-compliant":l});function B(e,l){e&1&&g(0,"app-loading-spinner",4)}function Y(e,l){e&1&&(a(0,"div",5)(1,"p"),s(2,"Stock not found."),i()())}function U(e,l){if(e&1&&(a(0,"div",37),s(1),i()),e&2){let t=f().$implicit;n(),d(t.details)}}function W(e,l){if(e&1&&(a(0,"div",25)(1,"div",26)(2,"div",27),s(3),i(),a(4,"div",28),s(5),i()(),a(6,"div",29),s(7),i(),a(8,"div",30)(9,"div",31),s(10),i(),a(11,"div",32),s(12),i()(),a(13,"div",33),g(14,"div",34)(15,"div",35),i(),m(16,U,2,1,"div",36),i()),e&2){let t=l.$implicit,o=f(2);r("ngClass",S(13,j,t.isCompliant,!t.isCompliant)),n(3),d(t.standard),n(),r("ngClass",t.isCompliant?"badge-halal":"badge-haram"),n(),h(" ",t.isCompliant?"Compliant":"Non-Compliant"," "),n(2),d(t.description),n(3),h("",t.value.toFixed(2),"%"),n(2),h("Threshold: ",t.threshold,"%"),n(2),v("width",o.getProgressWidth(t.value,t.threshold),"%"),r("ngClass",t.isCompliant?"compliant-bar":"non-compliant-bar"),n(),v("left",t.threshold,"%"),n(),r("ngIf",t.details)}}function H(e,l){e&1&&g(0,"app-loading-spinner",38)}function K(e,l){e&1&&(a(0,"div",39)(1,"p"),s(2,"No recent news for this stock."),i()())}function G(e,l){if(e&1&&g(0,"app-news-card",42),e&2){let t=l.$implicit;r("news",t)}}function J(e,l){if(e&1&&(a(0,"div",40),m(1,G,1,1,"app-news-card",41),i()),e&2){let t=f(2);n(),r("ngForOf",t.relatedNews)}}function Q(e,l){if(e&1&&(a(0,"div",6)(1,"div",7)(2,"div",8)(3,"h2"),s(4),i(),a(5,"span",9),s(6),i()(),a(7,"span",10),s(8),i()(),a(9,"div",11)(10,"div",12),s(11),i(),a(12,"div",13),s(13),i()(),a(14,"div",14)(15,"div",15),g(16,"div",16),i()(),a(17,"div",17)(18,"div",18)(19,"h3"),s(20,"About"),i(),a(21,"p"),s(22),i()(),a(23,"div",18)(24,"h3"),s(25,"Sharia Statistics"),i(),a(26,"div",19),m(27,W,17,16,"div",20),i()()(),a(28,"div",21)(29,"h3"),s(30,"Latest News"),i(),m(31,H,1,0,"app-loading-spinner",22)(32,K,3,0,"div",23)(33,J,2,1,"div",24),i()()),e&2){let t=f();n(4),d(t.stock.code),n(2),d(t.stock.name),n(),r("ngClass",t.stock.shariaStatus==="Halal"?"badge-halal":"badge-haram"),n(),h(" ",t.stock.shariaStatus," "),n(3),h("$",t.stock.price.toFixed(2),""),n(),r("ngClass",t.stock.change>=0?"positive":"negative"),n(),y(" ",t.stock.change>=0?"+":"","",t.stock.change.toFixed(2)," (",t.stock.changePercent.toFixed(2),"%) "),n(3),r("ngClass",t.stock.change>=0?"positive-chart":"negative-chart"),n(6),d(t.stock.description),n(5),r("ngForOf",t.shariaCompliance),n(4),r("ngIf",t.loadingNews),n(),r("ngIf",!t.loadingNews&&t.relatedNews.length===0),n(),r("ngIf",!t.loadingNews&&t.relatedNews.length>0)}}var at=(()=>{class e{constructor(t,o){this.route=t,this.apiService=o,this.relatedNews=[],this.loading=!0,this.loadingNews=!0,this.shariaCompliance=[]}ngOnInit(){this.route.paramMap.subscribe(t=>{let o=t.get("id");o&&(this.loadStockDetails(o),this.loadStockNews(o))})}loadStockDetails(t){this.loading=!0,this.apiService.getStockById(t).subscribe(o=>{this.stock=o,o&&this.calculateShariaCompliance(o),this.loading=!1})}loadStockNews(t){this.loadingNews=!0,this.apiService.getNewsForStock(t).subscribe(o=>{this.relatedNews=o,this.loadingNews=!1})}calculateShariaCompliance(t){let o={standard:"Business Activity",description:"Company's primary business must be permissible under Sharia law",value:100,threshold:95,isCompliant:!0,details:"Based on industry classification and business description"},c=t.totalDebt||0,p=t.totalAssets||1,C=c/p*100,F={standard:"Debt Ratio",description:"Interest-bearing debt to total assets ratio",value:C,threshold:33,isCompliant:C<=33,details:`Total debt: $${this.formatLargeNumber(c)}, Total assets: $${this.formatLargeNumber(p)}`},x=(t.cashAndCashEquivalents||0)+(t.accountsReceivable||0),u=x/p*100,z={standard:"Liquid Assets Ratio",description:"Cash and receivables to total assets ratio",value:u,threshold:33,isCompliant:u<=33,details:`Liquid assets: $${this.formatLargeNumber(x)}, Total assets: $${this.formatLargeNumber(p)}`},b=t.totalRevenue||1,P=t.interestIncome||0,M=P/b*100,R={standard:"Non-Permissible Income",description:"Non-compliant income to total revenue ratio",value:M,threshold:5,isCompliant:M<=5,details:`Non-permissible income: $${this.formatLargeNumber(P)}, Total revenue: $${this.formatLargeNumber(b)}`},O=(t.propertyPlantEquipment||0)+(t.inventory||0),k=O/p*100,q={standard:"Illiquid Assets Ratio",description:"Tangible assets to total assets ratio",value:k,threshold:20,isCompliant:k>=20,details:`Illiquid assets: $${this.formatLargeNumber(O)}, Total assets: $${this.formatLargeNumber(p)}`};this.shariaCompliance=[o,F,z,R,q]}getProgressWidth(t,o){return o<50?Math.min(t*1.5,100):Math.min(t,100)}formatLargeNumber(t){return t==null?"N/A":t>=1e9?(t/1e9).toFixed(2)+"B":t>=1e6?(t/1e6).toFixed(2)+"M":t>=1e3?(t/1e3).toFixed(2)+"K":t.toString()}static{this.\u0275fac=function(o){return new(o||e)(_(T),_(L))}}static{this.\u0275cmp=w({type:e,selectors:[["app-stock-detail"]],decls:4,vars:3,consts:[[1,"stock-detail-page"],["message","Loading stock details...",4,"ngIf"],["class","not-found",4,"ngIf"],["class","stock-content",4,"ngIf"],["message","Loading stock details..."],[1,"not-found"],[1,"stock-content"],[1,"stock-header"],[1,"stock-title"],[1,"stock-name"],[1,"badge",3,"ngClass"],[1,"stock-price-section"],[1,"current-price"],[1,"price-change",3,"ngClass"],[1,"stock-chart"],[1,"chart-placeholder"],[1,"chart-line",3,"ngClass"],[1,"stock-details"],[1,"detail-section"],[1,"sharia-stats"],["class","sharia-stat-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"stock-news"],["message","Loading news...",4,"ngIf"],["class","no-news",4,"ngIf"],["class","news-list",4,"ngIf"],[1,"sharia-stat-item",3,"ngClass"],[1,"stat-header"],[1,"stat-title"],[1,"compliance-badge",3,"ngClass"],[1,"stat-description"],[1,"stat-value-container"],[1,"stat-value"],[1,"stat-threshold"],[1,"compliance-bar"],[1,"compliance-progress",3,"ngClass"],[1,"threshold-marker"],["class","stat-details",4,"ngIf"],[1,"stat-details"],["message","Loading news..."],[1,"no-news"],[1,"news-list"],[3,"news",4,"ngFor","ngForOf"],[3,"news"]],template:function(o,c){o&1&&(a(0,"div",0),m(1,B,1,0,"app-loading-spinner",1)(2,Y,3,0,"div",2)(3,Q,34,15,"div",3),i()),o&2&&(n(),r("ngIf",c.loading),n(),r("ngIf",!c.loading&&!c.stock),n(),r("ngIf",!c.loading&&c.stock))},dependencies:[D,I,N,E,A,$],styles:['.stock-detail-page[_ngcontent-%COMP%]{padding:20px 0;animation:_ngcontent-%COMP%_fadeIn .8s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.not-found[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#666;background:#fff;border-radius:8px;box-shadow:var(--shadow)}.stock-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:var(--shadow);padding:20px;animation:_ngcontent-%COMP%_slideUp .8s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stock-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid #eee;animation:_ngcontent-%COMP%_slideInLeft .8s ease}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.stock-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin:0 0 4px;color:var(--primary-color)}.stock-name[_ngcontent-%COMP%]{font-size:1.1rem;color:#666}.badge[_ngcontent-%COMP%]{font-size:1rem;padding:6px 12px;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.stock-price-section[_ngcontent-%COMP%]{margin-bottom:24px;animation:_ngcontent-%COMP%_slideInRight .8s ease}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}.current-price[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:4px}.price-change[_ngcontent-%COMP%]{font-size:1.2rem;transition:all .3s ease}.price-change[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.positive[_ngcontent-%COMP%]{color:var(--secondary-color)}.negative[_ngcontent-%COMP%]{color:var(--danger-color)}.stock-chart[_ngcontent-%COMP%]{margin-bottom:24px;animation:_ngcontent-%COMP%_fadeIn 1s ease;animation-delay:.3s;animation-fill-mode:both}.chart-placeholder[_ngcontent-%COMP%]{height:200px;background-color:#f8f9fa;border-radius:8px;position:relative;overflow:hidden}.chart-line[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:0;height:100%;animation:_ngcontent-%COMP%_chartDraw 2s ease forwards;animation-delay:.5s}@keyframes _ngcontent-%COMP%_chartDraw{to{width:100%}}.positive-chart[_ngcontent-%COMP%]{background:linear-gradient(90deg,transparent,rgba(39,174,96,.2))}.negative-chart[_ngcontent-%COMP%]{background:linear-gradient(90deg,transparent,rgba(231,76,60,.2))}.stock-details[_ngcontent-%COMP%]{margin-bottom:24px;animation:_ngcontent-%COMP%_fadeIn 1s ease;animation-delay:.5s;animation-fill-mode:both}.detail-section[_ngcontent-%COMP%]{margin-bottom:30px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:20px;color:var(--primary-color);position:relative;display:inline-block}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-5px;left:0;width:40px;height:2px;background-color:var(--secondary-color);transition:width .3s ease}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:hover:after{width:100%}.detail-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1.6;color:#333}.sharia-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.sharia-stat-item[_ngcontent-%COMP%]{padding:20px;border-radius:8px;box-shadow:0 2px 10px #0000001a;transition:all .3s ease;border-left:4px solid #ddd}.sharia-stat-item.compliant[_ngcontent-%COMP%]{border-left-color:var(--secondary-color)}.sharia-stat-item.non-compliant[_ngcontent-%COMP%]{border-left-color:var(--danger-color)}.sharia-stat-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 15px #0000001a}.stat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.stat-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:var(--primary-color)}.compliance-badge[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 8px;border-radius:4px}.stat-description[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin-bottom:15px;line-height:1.4}.stat-value-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:10px}.stat-value[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.stat-threshold[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.compliance-bar[_ngcontent-%COMP%]{height:8px;background-color:#eee;border-radius:4px;position:relative;margin-bottom:15px;overflow:hidden}.compliance-progress[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width 1s ease}.compliant-bar[_ngcontent-%COMP%]{background-color:var(--secondary-color)}.non-compliant-bar[_ngcontent-%COMP%]{background-color:var(--danger-color)}.threshold-marker[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;width:2px;background-color:#333}.stat-details[_ngcontent-%COMP%]{font-size:.85rem;color:#666;font-style:italic}.stock-news[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;margin-bottom:16px;color:var(--primary-color);position:relative;display:inline-block}.stock-news[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-5px;left:0;width:40px;height:2px;background-color:var(--secondary-color);transition:width .3s ease}.stock-news[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:hover:after{width:100%}.no-news[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#666;background:#f8f9fa;border-radius:6px}.news-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:20px;animation:_ngcontent-%COMP%_fadeIn 1s ease;animation-delay:.7s;animation-fill-mode:both}@media (max-width: 768px){.news-list[_ngcontent-%COMP%], .sharia-stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})}}return e})();export{at as StockDetailComponent};

import{a as I,b as w}from"./chunk-PNPO67QQ.js";import{e as O}from"./chunk-OKGSBTW6.js";import{a as E}from"./chunk-EKRG7W7R.js";import{Ca as v,Db as b,Eb as y,Fb as k,Ha as g,Ib as M,Na as d,Qa as t,Ra as e,Sa as P,Xa as C,cb as o,db as s,eb as c,fb as S,gb as u,lb as _,ua as r,va as f}from"./chunk-CBZJCNC2.js";var L=a=>["/stock",a];function V(a,p){a&1&&P(0,"app-loading-spinner",11)}function T(a,p){a&1&&(t(0,"div",12)(1,"p"),o(2,"Your portfolio is empty. Start by adding some Sharia-compliant stocks!"),e(),t(3,"a",13),o(4,"Browse Stocks"),e()())}function $(a,p){if(a&1&&(t(0,"tr",16)(1,"td",17)(2,"div",18),o(3),e(),t(4,"div",19),o(5),e()(),t(6,"td")(7,"span",20),o(8),e()(),t(9,"td"),o(10),e(),t(11,"td"),o(12),e(),t(13,"td"),o(14),e(),t(15,"td"),o(16),e(),t(17,"td",21),o(18),e()()),a&2){let i=p.$implicit;d("routerLink",_(13,L,i.stock.id)),r(3),s(i.stock.code),r(2),s(i.stock.name),r(2),d("ngClass",i.stock.shariaStatus==="Halal"?"badge-halal":"badge-haram"),r(),c(" ",i.stock.shariaStatus," "),r(2),s(i.shares),r(2),c("$",i.purchasePrice.toFixed(2),""),r(2),c("$",i.stock.price.toFixed(2),""),r(2),c("$",i.currentValue.toFixed(2),""),r(),d("ngClass",i.profit>=0?"positive":"negative"),r(),u(" ",i.profit>=0?"+":"","$",i.profit.toFixed(2)," (",i.profitPercent.toFixed(2),"%) ")}}function z(a,p){if(a&1&&(t(0,"div",14)(1,"table")(2,"thead")(3,"tr")(4,"th"),o(5,"Stock"),e(),t(6,"th"),o(7,"Status"),e(),t(8,"th"),o(9,"Shares"),e(),t(10,"th"),o(11,"Avg. Price"),e(),t(12,"th"),o(13,"Current Price"),e(),t(14,"th"),o(15,"Current Value"),e(),t(16,"th"),o(17,"Profit/Loss"),e()()(),t(18,"tbody"),g(19,$,19,15,"tr",15),e()()()),a&2){let i=C();r(19),d("ngForOf",i.portfolio)}}var R=(()=>{class a{constructor(i,l){this.authService=i,this.apiService=l,this.portfolio=[],this.loading=!0,this.totalValue=0,this.totalProfit=0,this.totalProfitPercent=0,this.halalStocksCount=0}ngOnInit(){this.loadPortfolio()}loadPortfolio(){this.loading=!0,this.apiService.getStocks().subscribe(i=>{this.portfolio=i.slice(0,3).map(l=>{let n=Math.floor(Math.random()*20)+1,m=l.price*(1-(Math.random()*.2-.1)),h=n*l.price,x=h-n*m,F=x/(n*m)*100;return{stock:l,shares:n,purchasePrice:m,currentValue:h,profit:x,profitPercent:F}}),this.calculateSummary(),this.loading=!1})}calculateSummary(){this.totalValue=this.portfolio.reduce((l,n)=>l+n.currentValue,0);let i=this.portfolio.reduce((l,n)=>l+n.shares*n.purchasePrice,0);this.totalProfit=this.totalValue-i,this.totalProfitPercent=i>0?this.totalProfit/i*100:0,this.halalStocksCount=this.portfolio.filter(l=>l.stock.shariaStatus==="Halal").length}static{this.\u0275fac=function(l){return new(l||a)(f(E),f(w))}}static{this.\u0275cmp=v({type:a,selectors:[["app-portfolio"]],decls:26,vars:10,consts:[[1,"portfolio-page"],[1,"portfolio-header"],[1,"portfolio-summary"],[1,"summary-card"],[1,"summary-title"],[1,"summary-value"],[1,"summary-value",3,"ngClass"],[1,"portfolio-content"],["message","Loading your portfolio...",4,"ngIf"],["class","empty-portfolio",4,"ngIf"],["class","portfolio-table",4,"ngIf"],["message","Loading your portfolio..."],[1,"empty-portfolio"],["routerLink","/search",1,"browse-button"],[1,"portfolio-table"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"stock-info"],[1,"stock-code"],[1,"stock-name"],[1,"badge",3,"ngClass"],[3,"ngClass"]],template:function(l,n){l&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Your Portfolio"),e(),t(4,"p"),o(5,"Track your Sharia-compliant investments"),e()(),t(6,"div",2)(7,"div",3)(8,"div",4),o(9,"Total Value"),e(),t(10,"div",5),o(11),e()(),t(12,"div",3)(13,"div",4),o(14,"Total Profit/Loss"),e(),t(15,"div",6),o(16),e()(),t(17,"div",3)(18,"div",4),o(19,"Halal Stocks"),e(),t(20,"div",5),o(21),e()()(),t(22,"div",7),g(23,V,1,0,"app-loading-spinner",8)(24,T,5,0,"div",9)(25,z,20,1,"div",10),e()()),l&2&&(r(11),c("$",n.totalValue.toFixed(2),""),r(4),d("ngClass",n.totalProfit>=0?"positive":"negative"),r(),u(" ",n.totalProfit>=0?"+":"","$",n.totalProfit.toFixed(2)," (",n.totalProfitPercent.toFixed(2),"%) "),r(5),S("",n.halalStocksCount," / ",n.portfolio.length,""),r(2),d("ngIf",n.loading),r(),d("ngIf",!n.loading&&n.portfolio.length===0),r(),d("ngIf",!n.loading&&n.portfolio.length>0))},dependencies:[M,b,y,k,O,I],styles:[".portfolio-page[_ngcontent-%COMP%]{padding:20px 0}.portfolio-header[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}.portfolio-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:var(--primary-color);margin-bottom:8px}.portfolio-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.portfolio-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:30px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:var(--shadow);padding:20px;text-align:center}.summary-title[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-bottom:10px}.summary-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#333}.positive[_ngcontent-%COMP%]{color:var(--secondary-color)}.negative[_ngcontent-%COMP%]{color:var(--danger-color)}.portfolio-content[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:var(--shadow);padding:20px}.empty-portfolio[_ngcontent-%COMP%]{padding:30px;text-align:center;color:#666}.browse-button[_ngcontent-%COMP%]{display:inline-block;background-color:var(--primary-color);color:#fff;padding:10px 20px;border-radius:4px;margin-top:15px;text-decoration:none;transition:background-color .3s}.browse-button[_ngcontent-%COMP%]:hover{background-color:#34495e}.portfolio-table[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}th[_ngcontent-%COMP%]{text-align:left;padding:12px 15px;background-color:#f8f9fa;color:#333;font-weight:600;border-bottom:2px solid #eee}td[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid #eee}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .3s}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.stock-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stock-code[_ngcontent-%COMP%]{font-weight:700;color:#333}.stock-name[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;font-size:.8rem}"]})}}return a})();export{R as PortfolioComponent};
